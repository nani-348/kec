module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/child_process [external] (child_process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/process [external] (process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/querystring [external] (querystring, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("querystring", () => require("querystring"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/http2 [external] (http2, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[project]/Desktop/KADACO/src/lib/sheets.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CATEGORY_SHEETS",
    ()=>CATEGORY_SHEETS,
    "getAllTables",
    ()=>getAllTables,
    "getAquiferParameters",
    ()=>getAquiferParameters,
    "getCategoryData",
    ()=>getCategoryData,
    "getConservationMetrics",
    ()=>getConservationMetrics,
    "getCropData",
    ()=>getCropData,
    "getInflowsData",
    ()=>getInflowsData,
    "getIrrigationMethods",
    ()=>getIrrigationMethods,
    "getOutflowsData",
    ()=>getOutflowsData,
    "getRainfallData",
    ()=>getRainfallData,
    "getRealTimeWaterData",
    ()=>getRealTimeWaterData,
    "getSeasonalFluctuationData",
    ()=>getSeasonalFluctuationData,
    "getSeasonalRainfallData",
    ()=>getSeasonalRainfallData,
    "getStructureDistribution",
    ()=>getStructureDistribution,
    "getSustainabilityData",
    ()=>getSustainabilityData,
    "getTableData",
    ()=>getTableData,
    "getTankInventory",
    ()=>getTankInventory,
    "getTankStorageStatus",
    ()=>getTankStorageStatus,
    "getYearComparisonData",
    ()=>getYearComparisonData,
    "parseTables",
    ()=>parseTables
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Desktop/KADACO/node_modules/googleapis/build/src/index.js [app-route] (ecmascript)");
;
// Ensure environment variables are available
const SPREADSHEET_ID = process.env.GOOGLE_SHEETS_SPREADSHEET_ID;
const CLIENT_EMAIL = process.env.GOOGLE_SHEETS_CLIENT_EMAIL;
const PRIVATE_KEY = process.env.GOOGLE_SHEETS_PRIVATE_KEY?.replace(/\\n/g, '\n');
if (!CLIENT_EMAIL || !PRIVATE_KEY) {
    console.warn('Google Sheets credentials not configured. Using mock data.');
}
// Initialize auth once
const auth = CLIENT_EMAIL && PRIVATE_KEY ? new __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].auth.GoogleAuth({
    credentials: {
        client_email: CLIENT_EMAIL,
        private_key: PRIVATE_KEY
    },
    scopes: [
        'https://www.googleapis.com/auth/spreadsheets.readonly'
    ]
}) : null;
const sheets = auth ? __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].sheets({
    version: 'v4',
    auth
}) : null;
const CATEGORY_SHEETS = [
    'Overview',
    'Groundwater',
    'Aquifer',
    'MITanks',
    'WaterBalance',
    'Hydrology',
    'Agriculture',
    'Conservation',
    'DataMethods',
    'Resources',
    'CaseStudies'
];
async function getCategoryData(categoryName) {
    if (!sheets || !SPREADSHEET_ID) {
        console.warn(`Sheet data not available for ${categoryName}. Using fallback.`);
        return [];
    }
    try {
        const response = await sheets.spreadsheets.values.get({
            spreadsheetId: SPREADSHEET_ID,
            range: categoryName
        });
        return response.data.values || [];
    } catch (error) {
        console.error(`Error fetching category ${categoryName}:`, error);
        throw error;
    }
}
function parseTables(rawData) {
    const tables = new Map();
    let currentTitle = '';
    let currentHeaders = [];
    let currentRows = [];
    let expectingHeaders = false;
    for (const row of rawData){
        // Empty row - save current table and reset
        if (!row || row.length === 0 || row.every((cell)=>cell === null || cell === '')) {
            if (currentTitle && currentRows.length > 0) {
                tables.set(currentTitle, currentRows);
            }
            currentTitle = '';
            currentHeaders = [];
            currentRows = [];
            expectingHeaders = false;
            continue;
        }
        // Check if this is a title row (starts with emoji or all caps first cell)
        const firstCell = String(row[0] || '');
        const isTitle = firstCell.match(/^[ðŸ“ŠðŸŒ§ï¸ðŸ“‹ðŸ“ˆðŸ—ºï¸ðŸŒŠâ¬†ï¸â¬‡ï¸âš–ï¸ðŸš°ðŸ’§ðŸ”¬âš ï¸ðŸ—ï¸ðŸ’¡ðŸŒ¾ðŸ”§âš¡ðŸ”„ðŸ“ðŸŒ¾]/);
        if (isTitle) {
            // Save previous table if exists
            if (currentTitle && currentRows.length > 0) {
                tables.set(currentTitle, currentRows);
            }
            currentTitle = firstCell;
            currentHeaders = [];
            currentRows = [];
            expectingHeaders = true;
            continue;
        }
        // If expecting headers, this row is the header row
        if (expectingHeaders) {
            currentHeaders = row.map((cell)=>String(cell || ''));
            expectingHeaders = false;
            continue;
        }
        // Data row - convert to object using headers
        if (currentHeaders.length > 0) {
            const obj = {};
            currentHeaders.forEach((header, index)=>{
                const value = row[index];
                if (value === '' || value === undefined || value === null) {
                    obj[header] = null;
                } else if (value === 'true' || value === 'TRUE') {
                    obj[header] = true;
                } else if (value === 'false' || value === 'FALSE') {
                    obj[header] = false;
                } else {
                    const numValue = parseFloat(String(value));
                    obj[header] = !isNaN(numValue) && String(numValue) === String(value) ? numValue : value;
                }
            });
            currentRows.push(obj);
        }
    }
    // Don't forget the last table
    if (currentTitle && currentRows.length > 0) {
        tables.set(currentTitle, currentRows);
    }
    return tables;
}
async function getTableData(categoryName, tableTitle) {
    const rawData = await getCategoryData(categoryName);
    const tables = parseTables(rawData);
    // Find table by partial title match
    for (const [title, data] of tables){
        if (title.toLowerCase().includes(tableTitle.toLowerCase())) {
            return data;
        }
    }
    console.warn(`Table "${tableTitle}" not found in ${categoryName}`);
    return [];
}
async function getAllTables(categoryName) {
    const rawData = await getCategoryData(categoryName);
    return parseTables(rawData);
}
async function getRealTimeWaterData() {
    return getTableData('Groundwater', 'REAL-TIME WATER LEVELS');
}
async function getSeasonalFluctuationData() {
    return getTableData('Groundwater', 'SEASONAL FLUCTUATION');
}
async function getYearComparisonData() {
    return getTableData('Groundwater', 'YEAR-OVER-YEAR');
}
async function getRainfallData() {
    return getTableData('Overview', 'RAINFALL BY MANDAL');
}
async function getSeasonalRainfallData() {
    return getTableData('Overview', 'SEASONAL RAINFALL');
}
async function getAquiferParameters() {
    return getTableData('Aquifer', 'AQUIFER PARAMETERS');
}
async function getSustainabilityData() {
    return getTableData('Aquifer', 'SUSTAINABILITY');
}
async function getTankInventory() {
    return getTableData('MITanks', 'TANK INVENTORY');
}
async function getTankStorageStatus() {
    return getTableData('MITanks', 'CURRENT STORAGE STATUS');
}
async function getInflowsData() {
    return getTableData('WaterBalance', 'INFLOWS');
}
async function getOutflowsData() {
    return getTableData('WaterBalance', 'OUTFLOWS');
}
async function getConservationMetrics() {
    return getTableData('Conservation', 'SUMMARY METRICS');
}
async function getStructureDistribution() {
    return getTableData('Conservation', 'STRUCTURE DISTRIBUTION');
}
async function getCropData() {
    return getTableData('Agriculture', 'CROP AREA');
}
async function getIrrigationMethods() {
    return getTableData('Agriculture', 'IRRIGATION METHODS');
}
}),
"[project]/Desktop/KADACO/src/app/api/sheets/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET,
    "dynamic",
    ()=>dynamic
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Desktop/KADACO/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Desktop/KADACO/src/lib/sheets.ts [app-route] (ecmascript)");
;
;
const dynamic = 'force-dynamic'; // Disable caching for real-time data
const isSheetCategory = (value)=>__TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CATEGORY_SHEETS"].includes(value);
async function GET(request) {
    try {
        const searchParams = request.nextUrl.searchParams;
        const category = searchParams.get('category');
        const table = searchParams.get('table');
        // Validate category
        if (!category) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Missing required parameter: category',
                availableCategories: __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CATEGORY_SHEETS"],
                usage: '/api/sheets?category=Groundwater&table=REAL-TIME'
            }, {
                status: 400
            });
        }
        // Check if category is valid
        if (!isSheetCategory(category)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: `Invalid category: ${category}`,
                availableCategories: __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CATEGORY_SHEETS"]
            }, {
                status: 400
            });
        }
        // If table is specified, return just that table
        if (table) {
            const data = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTableData"])(category, table);
            return __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: true,
                category,
                table,
                count: data.length,
                data,
                lastFetched: new Date().toISOString()
            });
        }
        // Otherwise return all tables in the category
        const rawData = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCategoryData"])(category);
        const tables = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$src$2f$lib$2f$sheets$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseTables"])(rawData);
        // Convert Map to object for JSON
        const tablesObj = {};
        for (const [title, data] of tables){
            tablesObj[title] = data;
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            category,
            tableCount: tables.size,
            tables: Array.from(tables.keys()),
            data: tablesObj,
            lastFetched: new Date().toISOString()
        });
    } catch (error) {
        console.error('API Error:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$Desktop$2f$KADACO$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Failed to fetch sheet data',
            message: error instanceof Error ? error.message : 'Unknown error'
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__a1cd634c._.js.map